import{_ as f,a as x,u as b,j as g,s as m,r as u,c as w,d as v,o as h,g as y,e as t,w as o,v as a,F as z,k}from"./index-D3x6AC__.js";const B={class:"overflow-y-auto mb-[120px] mt-[110px] bg-white shadow-lg rounded-lg border p-2"},I={class:"flex flex-col items-center px-6 mt-7 w-full"},O={class:"flex flex-col mt-3.5 w-auto min-h-[622px]"},_={class:"flex justify-between items-start max-w-full text-lg leading-loose whitespace-nowrap text-zinc-900 w-[335px]"},C={class:"flex flex-col rounded min-w-[240px] w-[335px]"},U={class:"flex flex-col mt-4 w-full text-lg leading-loose rounded max-w-[335px] text-zinc-900"},H={class:"flex flex-col mt-4 w-full rounded-lg max-w-[335px] text-zinc-900"},P={class:"flex gap-2 items-start px-3.5 py-3 mt-2 bg-white rounded-lg border-2 border-solid border-zinc-900"},V={class:"flex flex-col mt-4 w-full text-lg leading-loose whitespace-nowrap rounded max-w-[335px] text-zinc-900"},L={class:"flex flex-col mt-4 w-full text-lg leading-loose whitespace-nowrap rounded max-w-[335px] text-zinc-900"},F={__name:"AddUser",setup(T){const r=x();b();const i=g(),{fetchUser:j}=i,{User:A}=m(i),n=u(!1),l=u({account:"",name:"",date:"",email:"",desc:""}),c=async()=>{var d;if(l.value.name.trim().length<=0||!/^09[0-9]{8}$/.test(l.value.account)||l.value.date.length==0){r.error("請檢查 名稱、電話、生日 是否正確",{position:"top-center",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1});return}try{l.value.date=new Date(l.value.date).getTime(),n.value=!0;const e=await k.post("/coffee/admin/user",{...l.value},{withCredentials:!0});r.success("新增成功",{position:"top-center",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})}catch(e){((d=e.response)==null?void 0:d.status)===500&&r.error(e.response.data,{position:"top-center",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1})}finally{n.value=!1}};return(d,e)=>{const p=w("Loading");return h(),v(z,null,[y(p,{active:n.value,"is-full-page":!0,"can-cancel":!0,color:"oklch(0.21 0.006 285.885)","background-color":"rgb(255, 255, 255)",height:128,width:128,loader:"Bars"},null,8,["active"]),t("div",B,[t("div",I,[e[11]||(e[11]=t("div",{class:"self-start text-2xl w-auto text-zinc-900"},"輸入會員資料",-1)),t("form",O,[t("div",_,[t("div",C,[e[5]||(e[5]=t("label",{for:"nameInput",class:"self-start"},"名稱(可暱稱)*",-1)),o(t("input",{type:"text",id:"nameInput",placeholder:"輸入名稱",class:"flex shrink-0 gap-2.5 py-3 mt-2 h-12 bg-white rounded border-2 border-solid border-zinc-900","onUpdate:modelValue":e[0]||(e[0]=s=>l.value.name=s)},null,512),[[a,l.value.name]])])]),t("div",U,[e[6]||(e[6]=t("label",{for:"phoneInput",class:"self-start"},"會員 (電話)*",-1)),o(t("input",{type:"tel",id:"phoneInput",placeholder:"輸入電話",class:"flex shrink-0 gap-2.5 py-3 mt-2 h-12 bg-white rounded border-2 border-solid border-zinc-900","onUpdate:modelValue":e[1]||(e[1]=s=>l.value.account=s)},null,512),[[a,l.value.account]])]),t("div",H,[e[8]||(e[8]=t("label",{for:"birthdateInput",class:"self-start text-lg leading-loose text-zinc-900"},"生日(月日就好 年隨便填)*",-1)),t("div",P,[e[7]||(e[7]=t("img",{loading:"lazy",src:"https://cdn.builder.io/api/v1/image/assets/TEMP/bc08cc744d03b4a6c40eab045ccabb44a2df07b744b8b72f5959183723232468?placeholderIfAbsent=true&apiKey=1658e52805814928b66db3bf763c83c5",class:"object-contain w-6 aspect-square",alt:"Calendar icon"},null,-1)),o(t("input",{type:"date",id:"birthdateInput",class:"w-full","onUpdate:modelValue":e[2]||(e[2]=s=>l.value.date=s)},null,512),[[a,l.value.date]])])]),t("div",V,[e[9]||(e[9]=t("label",{for:"emailInput",class:"self-start"},"電子信箱(可不填)",-1)),o(t("input",{type:"email",id:"emailInput",placeholder:"輸入信箱",class:"flex shrink-0 gap-2.5 py-3 mt-2 h-12 bg-white rounded border-2 border-solid border-zinc-900","onUpdate:modelValue":e[3]||(e[3]=s=>l.value.email=s)},null,512),[[a,l.value.email]])]),t("div",L,[e[10]||(e[10]=t("label",{for:"notesInput",class:"self-start"},"備註(可不填)",-1)),o(t("textarea",{id:"notesInput",placeholder:"輸入會員的備註(會員看不到)",class:"flex shrink-0 gap-2.5 mt-2 bg-white rounded border-2 border-solid border-zinc-900 h-[119px]","onUpdate:modelValue":e[4]||(e[4]=s=>l.value.desc=s)},null,512),[[a,l.value.desc]])])])])]),t("div",{class:"h-[120px] fixed bottom-0 left-0 w-full flex flex-col justify-center px-5 pt-6 pb-12 -mt-11 w-full text-2xl leading-none text-center text-white whitespace-nowrap bg-white shadow-sm"},[t("button",{onClick:c,class:"overflow-hidden gap-2.5 self-stretch px-6 py-3 rounded-lg border-4 border-solid bg-zinc-900 border-zinc-900"}," 新增 ")])],64)}}},E=f(F,[["__scopeId","data-v-bb944515"]]);export{E as default};
