import{a as z,s as $,m as w,c,o as l,d as e,t,h as f,F as v,l as k,_ as A,n as H,r as h,k as C,p as M,b as K,f as L,g as I,q as N,x as U,y as j,z as B,A as P}from"./index-CkKaNGE_.js";import{d as y}from"./dayjs.min-DLYyQfjy.js";const R={class:"flex flex-col px-4 mt-3.5 w-full"},q={class:"flex flex-col items-start self-center px-4 py-4 w-full rounded-lg border-4 border-solid border-zinc-800 max-w-[335px] text-zinc-800"},V={class:"flex gap-6 text-center whitespace-nowrap"},F={class:"my-auto text-2xl"},E={class:"text-3xl basis-auto"},G={class:"flex gap-3 px-2.5 py-1.5 mt-2 ml-3 text-lg tracking-normal leading-none bg-white rounded-lg border-4 border-solid border-zinc-900"},W={class:"basis-auto"},J={class:"overflow-x-auto w-full"},O={class:"flex gap-4 items-start mt-5 whitespace-nowrap"},Q={class:"flex flex-col px-3 py-4 w-full bg-white rounded-none border-2 border-solid border-zinc-900 text-zinc-900"},X={class:"text-sm tracking-wide"},Z={class:"text-lg tracking-normal leading-none"},ee={class:"mt-1 text-xs tracking-wide"},te={class:"mt-1 text-xs tracking-wide"},se={class:"text-xs tracking-wide"},ae={__name:"UserStoreHome",setup(g){const m=z(),{UserSearchData:s}=$(m),r=w(()=>[...s.value.Keeps].sort((u,a)=>a.DateTime.seconds-u.DateTime.seconds));return(u,a)=>(l(),c("div",R,[e("div",q,[e("div",V,[e("div",F,t(f(s).Name),1),e("div",E,t(f(s).MonthDay.replace("-","月")+"日"),1)]),e("div",G,[a[0]||(a[0]=e("img",{loading:"lazy",src:"https://cdn.builder.io/api/v1/image/assets/1658e52805814928b66db3bf763c83c5/8ed27068e2b86736d3b2f1dbf63e952cbc1b693363b7f29857093d7b8572e8cb?apiKey=1658e52805814928b66db3bf763c83c5&",class:"object-contain shrink-0 w-6 aspect-square",alt:"Phone Icon"},null,-1)),a[1]||(a[1]=e("div",null,"電話:",-1)),e("div",W,t(f(s).Account),1)])]),a[3]||(a[3]=e("div",{class:"self-start mt-4 text-2xl leading-none text-center text-zinc-900",role:"heading","aria-level":"2"}," 您的庫存 ",-1)),e("div",J,[e("div",O,[(l(!0),c(v,null,k(r.value,(i,x)=>(l(),c("div",{key:i.id,class:"flex flex-col w-[150px] shrink-0",tabindex:"0",role:"article","aria-label":"Large Latte Stock"},[a[2]||(a[2]=e("div",{class:"flex overflow-hidden flex-col justify-center items-center px-4 py-10 w-full border-2 border-solid bg-zinc-100 border-zinc-900 rounded-t-lg"},[e("img",{loading:"lazy",src:"https://cdn.builder.io/api/v1/image/assets/1658e52805814928b66db3bf763c83c5/3f99a80673c020e4d1b4351e57d0eeb35b539a3ade9906fe51e6f0466dfa7d6b?apiKey=1658e52805814928b66db3bf763c83c5&",class:"object-contain w-6 aspect-square",alt:"Coffee Cup Icon"})],-1)),e("div",Q,[e("div",X,t(x+1),1),e("div",Z,t(i.Item.Name),1),e("div",ee," 總數量: "+t(i.Amount),1),e("div",te," 剩餘數量: "+t(i.RemainingAmount),1),e("div",se,t(f(y)(i.DateTime.seconds*1e3).format("YYYY MM月DD日 HH:mm")),1)])]))),128))])])]))}},oe={class:"flex flex-col overflow-y-auto min-h-[500px] max-h-[500px] items-center px-6 mt-5 w-full text-base tracking-wide rounded-md",role:"list","aria-label":"Transaction History"},ne={class:"flex gap-5 justify-between py-3 w-full bg-white border-b-2 border-solid border-b-zinc-900",role:"listitem"},ie={class:"flex gap-2.5"},le={class:"flex flex-col"},re={class:"self-start text-zinc-900"},ce={class:"mt-1 text-stone-500"},de={class:"self-start text-zinc-900"},me={__name:"UserStoreLogs",props:["userlogs"],setup(g){return(m,s)=>(l(),c("div",oe,[(l(!0),c(v,null,k(g.userlogs,r=>(l(),c("div",ne,[e("div",ie,[s[0]||(s[0]=e("img",{loading:"lazy",src:"https://cdn.builder.io/api/v1/image/assets/1658e52805814928b66db3bf763c83c5/bc52c0ecbf45ac0162e7ce0956322c4d1472b0c8c12760836c29f7e52726f959?apiKey=1658e52805814928b66db3bf763c83c5&",class:"object-contain shrink-0 w-12 aspect-square fill-zinc-100",alt:"Latte Transaction Icon"},null,-1)),e("div",le,[e("div",re,t(r.title),1),e("div",ce,t(r.datetime),1)])]),e("div",de," 編號"+t(r.index+1)+" "+t(r.desc),1)]))),256))]))}},ue={class:"text-sm font-medium text-center text-black border-b border-gray-300 bg-white"},be={class:"flex flex-wrap -mb-px"},pe=["onClick"],fe={key:0,class:"flex overflow-y-auto flex-col pb-10 mx-auto w-full bg-white",role:"main","aria-label":"Member Warehouse Section"},xe={__name:"UserStore",setup(g){const m=z(),{UserSearchData:s}=$(m),{GetUserSearchData:r}=m,u=H(),a=h(!1),i=h([]),x=[{id:0,title:"庫存",component:ae},{id:1,title:"紀錄",component:me}],b=h(0),D=()=>{for(const[o,n]of s.value.Keeps.entries()){let _=s.value.Keeps[o].Amount;i.value.push({index:o,title:`${n.Item.Name} +${n.Amount}`,datetime:y(n.DateTime.seconds*1e3).format("YYYY MM月DD日 HH:mm"),timestamp:n.DateTime.seconds,desc:"寄放"});let d=n.Pickup.map(p=>(_-=p.Amount,{index:o,title:`${n.Item.Name} -${p.Amount}`,datetime:y(p.DateTime.seconds*1e3).format("YYYY MM月DD日 HH:mm"),timestamp:p.DateTime.seconds,desc:"領取"}));s.value.Keeps[o].RemainingAmount=_,i.value.push(...d)}i.value.sort((o,n)=>n.timestamp-o.timestamp)},S=o=>{b.value=o},T=w(()=>x[b.value].component),Y=w(()=>b.value==1?{userlogs:i.value}:{});return C(async()=>{await r(u.params.account),D()}),M(()=>u.params.account,async o=>{await r(o),D()}),(o,n)=>{const _=K("Loading");return l(),c(v,null,[L(_,{active:a.value,"is-full-page":!0,"can-cancel":!0,color:"oklch(0.21 0.006 285.885)","background-color":"rgb(255, 255, 255)",height:128,width:128,loader:"Bars"},null,8,["active"]),n[0]||(n[0]=e("div",{class:"min-h-[76px]"},null,-1)),e("div",ue,[e("ul",be,[(l(),c(v,null,k(x,d=>e("li",{key:d.id,class:"me-2"},[e("a",{href:"#",class:N({"inline-block p-4 text-black border-b-2 border-black rounded-t-lg activek":d.id==b.value,"inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-black hover:border-gray-400":d.id!=b.value}),onClick:p=>S(d.id)},t(d.title),11,pe)])),64))])]),f(s)?(l(),c("div",fe,[(l(),U(P(T.value),j(B(Y.value)),null,16))])):I("",!0)],64)}}},ge=A(xe,[["__scopeId","data-v-917d4e9e"]]);export{ge as default};
